(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42b5ea33"],{"17b3":function(t,e,a){},8199:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{staticClass:"pl-10 pr-10"},[a("v-card",[a("v-card-text",[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{staticClass:"entity__create_btn",attrs:{color:"info",to:{name:"Cars.create"}}},[a("v-icon",[t._v("mdi-plus")]),t._v(" "+t._s("Создать автомобиль")+" ")],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{attrs:{headers:t.orderHeaders,items:t.cars,loading:t.loading,"items-per-page":5,"footer-props":{"items-per-page-options":[5,10],"items-per-page-text":"Машин на странице:"},"loading-text":"Загрузка машин, пожалуйста подождите..."},on:{"update:items-per-page":t.getItemPerPage},scopedSlots:t._u([{key:"item.info",fn:function(e){var i=e.item;return[a("v-row",[a("v-col",{staticClass:"order__addition_info pb-0 mb-0",attrs:{cols:"12"}},[t._v(" Модель "),a("br"),a("b",[t._v(t._s(i.name?i.name:"-"))])]),a("v-col",{staticClass:"ma-0 pa-0 pl-3",attrs:{cols:"12"}},[t._v(" Описание "),a("br"),t._v(t._s(i.description?i.description:"-")+" ")]),a("v-col",{staticClass:"order__addition_info pt-0 mt-0",attrs:{cols:"12"}},[t._v(" Бак "+t._s(i.tank?i.tank+" литров":"-")+" ")])],1)]}},{key:"item.car",fn:function(e){var i=e.item;return[a("v-row",{staticClass:"pa-0 pt-6 pb-6"},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[t._v(" Категория "),a("br"),a("b",[t._v(t._s(i.categoryId?t.truncate(i.categoryId.name,5):"-"))])]),a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[t._v(" Описание "),a("br"),a("b",[t._v(t._s(i.categoryId?t.truncate(i.categoryId.description,20):"-"))])]),a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[t._v(" Номер "),a("b",{staticClass:"primary--text"},[t._v(t._s(i.number?i.number:"-"))])])],1)]}},{key:"item.colors",fn:function(e){var i=e.item;return[a("v-row",{staticClass:"pt-6 pb-6"},[i.colors.length>0?a("div",[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[t._v(" От "),a("b",[t._v(t._s(i.priceMin?i.priceMin:"-"))])]),a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[t._v(" До "),a("b",[t._v(t._s(i.priceMax?i.priceMax:"-"))])]),t._l(i.colors,(function(e,i){return a("v-col",{key:i,staticClass:"order__addition_info ma-0 pa-0",attrs:{cols:"12"}},[t._v(" - "),a("b",[t._v(t._s(e))])])}))],2):a("div",[t._v(" - ")])])]}},{key:"item.createdAt",fn:function(e){var i=e.item;return[a("v-row",{staticClass:"pt-6 pb-6"},[a("v-col",{staticClass:"ma-0 pa-0 pl-3",attrs:{cols:"12"}},[t._v(" Создано "+t._s(i.createdAt?t.formatDate(i.createdAt):"-")+" ")]),a("v-col",{staticClass:"ma-0 pa-0 pl-3",attrs:{cols:"12"}},[t._v(" Изменено "+t._s(i.updatedAt?t.formatDate(i.updatedAt):"-")+" ")])],1)]}},{key:"item.photo",fn:function(e){var i=e.item;return[a("img",{staticClass:"model__car_image",attrs:{src:t.getImgPath(i),alt:""},on:{error:t.defaultImage}})]}},{key:"item.carCard",fn:function(e){var i=e.item;return[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-btn-toggle",{attrs:{dense:""}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"order__actions",attrs:{outlined:"",color:"black",to:{name:"Cars.edit",params:{id:i.id}}}},"v-btn",n,!1),s),[a("v-icon",{attrs:{color:"success"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[a("span",[t._v(t._s("Карточка автомобиля - "+i.name))])])],1)],1)],1),a("div",{staticClass:"order__hrs"})]}}],null,!0)})],1),a("v-col",{staticClass:"order__table_circles pl-10 pr-10 pb-16",attrs:{cols:"6"}},[a("v-pagination",{attrs:{length:t.pageCount,circle:""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1)],1)],1)},s=[],n=a("5530"),r=(a("99af"),a("2f62")),o={name:"Cars",data:function(){return{imgDefPath:a("c168"),loading:!0,page:1,pageCount:14,request:{limit:5,offset:0},cars:[],categories:[],formKey:1,itemsPerPage:5,dateSettings:{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}}},computed:Object(n["a"])({orderHeaders:function(){return[{value:"photo",text:"Фото",searchable:!1,sortable:!1,width:"10%"},{value:"info",text:"Инфо",sortable:!1,width:"18%"},{value:"car",text:"Дополнительно",searchable:!1,sortable:!1,width:"18%"},{value:"colors",text:"Цены и цвета",searchable:!1,sortable:!1,width:"18%"},{value:"createdAt",text:"Дата создания",width:"18%"},{value:"carCard",text:"",searchable:!1,sortable:!1,width:"18%"}]}},Object(r["c"])("entities",["getCars","getCar","getCategories"])),watch:{itemsPerPage:function(t){this.request.limit=t,this.pageCount=70/t,this.page=1},page:function(t){this.request.offset=t*this.request.limit,this.fetchRows()},getCar:{handler:function(t){t||this.fetchRows()},deep:!0}},mounted:function(){var t=this;0===this.getCategories.length?this.fetchCategories().then((function(){t.categories=t.getCategories})):this.categories=this.getCategories,0===this.getCars.length?this.fetchRows():this.cars=this.getCars},methods:Object(n["a"])(Object(n["a"])({},Object(r["b"])("entities",["fetchCars","fetchCategories","deleteEntity"])),{},{getImgPath:function(t){return"undefined"!=typeof t&&null!==t&&t.thumbnail.path.length<1e3?"".concat("https://api-factory.simbirsoft1.com").concat(t.thumbnail.path):this.imgDefPath},formatDate:function(t){return new Date(t).toLocaleString([],this.dateSettings)},truncate:function(t,e){return t.length>e?t.substring(0,e)+"...":t},getItemPerPage:function(t){this.itemsPerPage=t},defaultImage:function(t){t.target.src=this.imgDefPath},fetchRows:function(){var t=this;this.loading=!0,this.fetchCars(this.request).then((function(){t.loading=!1,t.cars=t.getCars}))}})},c=o,l=a("2877"),u=a("6544"),h=a.n(u),v=a("8336"),g=a("a609"),p=a("b0af"),d=a("99d9"),f=a("62ad"),m=a("8fea"),b=a("132d"),_=a("891e"),C=a("0fd9"),y=a("3a2f"),x=Object(l["a"])(c,i,s,!1,null,null,null);e["default"]=x.exports;h()(x,{VBtn:v["a"],VBtnToggle:g["a"],VCard:p["a"],VCardText:d["b"],VCol:f["a"],VDataTable:m["a"],VIcon:b["a"],VPagination:_["a"],VRow:C["a"],VTooltip:y["a"]})},"891e":function(t,e,a){"use strict";var i=a("2909"),s=a("5530"),n=(a("a9e3"),a("99af"),a("d3b7"),a("25f0"),a("d81d"),a("17b3"),a("9d26")),r=a("dc22"),o=a("a9ad"),c=a("de2c"),l=a("7560"),u=a("58df");e["a"]=Object(u["a"])(o["a"],Object(c["a"])({onVisible:["init"]}),l["a"]).extend({name:"v-pagination",directives:{Resize:r["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return Object(s["a"])({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var a=e%2===0?1:0,s=Math.floor(e/2),n=this.length-s+1+a;if(this.value>s&&this.value<n){var r=1,o=this.length,c=this.value-s+2,l=this.value+s-2-a,u=c-1===r+1?2:"...",h=l+1===o-1?l+1:"...";return[1,u].concat(Object(i["a"])(this.range(c,l)),[h,this.length])}if(this.value===s){var v=this.value+s-1-a;return[].concat(Object(i["a"])(this.range(1,v)),["...",this.length])}if(this.value===n){var g=this.value-s+1;return[1,"..."].concat(Object(i["a"])(this.range(g,this.length)))}return[].concat(Object(i["a"])(this.range(1,s)),["..."],Object(i["a"])(this.range(n,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var a=[];t=t>0?t:1;for(var i=t;i<=e;i++)a.push(i);return a},genIcon:function(t,e,a,i,s){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":a},attrs:{disabled:a,type:"button","aria-label":s},on:a?{}:{click:i}},[t(n["a"],[e])])])},genItem:function(t,e){var a=this,i=e===this.value&&(this.color||"primary"),s=e===this.value,n=s?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(i,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":s,"aria-label":this.$vuetify.lang.t(n,e)},on:{click:function(){return a.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map((function(a,i){return t("li",{key:i},[isNaN(Number(a))?t("span",{class:"v-pagination__more"},[a.toString()]):e.genItem(t,a)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},c168:function(t,e,a){t.exports=a.p+"img/default_car.a91ab7fb.jpg"}}]);
//# sourceMappingURL=chunk-42b5ea33.a01bba30.js.map